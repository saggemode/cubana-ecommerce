import { MainLayout } from '@/components/main-layout'
import ClientOnly from '@/components/ClientOnly'
import EmptyState from '@/components/EmptyState'
import Link from 'next/link'
import getRelatedProducts from '@/actions/getRelatedProduct'
import getProductById from '@/actions/getProductById'
import  ProductDetails from './_components/ProductDetails'
import Gallery from './_components/gallery'

interface IParams {
  params: {
    productId: string
  }
}

const page: React.FC<IParams> = async ({ params }) => {
  const product = await getProductById(params)

  if (!product) {
    return (
      <ClientOnly>
        <EmptyState />
      </ClientOnly>
    )
  }
  return (
    <MainLayout
      className="flex flex-col items-start gap-4 sm:flex-row md:gap-6 lg:justify-center lg:gap-8 mt-12 pt-12"
      title="Shopping Cart | Product"
      description="Buy this product and get free shipping."
      image="/product.png"
      url={`/product/1`}
    >
      <Gallery images={product.images} />
      <div className="flex w-full max-w-4xl flex-col-reverse gap-4 md:gap-6 lg:flex-row lg:gap-8">
        
        <ProductDetails product={product} />
      </div>
    </MainLayout>
  )
}

export default page
